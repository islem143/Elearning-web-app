import{u as $,r as u}from"./index.esm.df1fd4d8.js";import{_ as p,j as n,r as d,o as f,c as g,a as i,b as r,g as v}from"./index.72b1626b.js";const V={created(){let t=parseInt(this.$route.params.moduleId);this.id=t,t&&n.get("/api/module/"+t).then(e=>{console.log(e.data),this.info.title=e.data.title,this.info.description=e.data.descprtion})},setup(){return{v$:$()}},name:"ModuleForm",data(){return{id:null,info:{title:"",description:""}}},validations(){return{info:{title:{required:u},description:{required:u}}}},methods:{errorMessages(t){const e=[];if(!this.v$.goal[t].$dirty)return e;for(const s of this.v$.goal[t].$errors)e.push(s.$message);return e},async submit(){await this.v$.$validate()&&(this.id?await n.put("/api/module/"+this.id,this.info).then(async e=>{let s=this.$refs.image.files[0];if(this.$toast.add({severity:"success",summary:"Module  updated.",life:3e3}),s){let a=new FormData;a.append("image",s),await n.post("/api/module/"+this.id+"/image",a,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{this.$router.push({name:"module-list"})})}}):await n.post("/api/module",this.info).then(async e=>{const s=e.data.id;let a=this.$refs.image.files[0],o=new FormData;o.append("image",a),await n.post("/api/module/"+s+"/image",o,{headers:{"Content-Type":"multipart/form-data"}}).then(c=>{this.$router.push({name:"module-list"})})}))}}},F={class:"card p-fluid"},x=i("h4",null,"Add module",-1),y={class:"flex justify-content-center"},b={class:"w-6 mt-5"},w={class:"field"},M=i("label",{for:"name1"},"Title",-1),C={class:"field"},B=i("label",{for:"Description"},"Description",-1),D={class:"field"},I=i("label",{for:"age1"},"Image",-1);function T(t,e,s,a,o,c){const l=d("InputText"),_=d("FileUpload"),h=d("Button");return f(),g("div",F,[x,i("div",y,[i("div",b,[i("div",w,[M,r(l,{modelValue:o.info.title,"onUpdate:modelValue":e[0]||(e[0]=m=>o.info.title=m),type:"text"},null,8,["modelValue"])]),i("div",C,[B,r(l,{modelValue:o.info.description,"onUpdate:modelValue":e[1]||(e[1]=m=>o.info.description=m),type:"text"},null,8,["modelValue"])]),i("div",D,[I,r(_,{ref:"image",mode:"basic",name:"image",accept:"image/*",maxFileSize:1e6},null,512)]),r(h,{onClick:c.submit,label:"Submit"},null,8,["onClick"])])])])}const k=p(V,[["render",T]]),U={name:"ModuleEdit",components:{ModuleFormVue:k}};function E(t,e,s,a,o,c){const l=d("ModuleFormVue");return f(),v(l)}const S=p(U,[["render",E]]);export{S as default};
