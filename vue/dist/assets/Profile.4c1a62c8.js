import{u as g,r as v}from"./index.esm.19565990.js";import{_ as b,s as r,g as u,o as c,c as m,a as t,b as n,i as $,r as l}from"./index.ae1caef1.js";const x={created(){this.user=r.state.auth.user.data,console.log(this.user)},setup(){return{v$:g()}},name:"ModuleForm",data(){return{id:null,user:null}},validations(){return{user:{name:{required:v}}}},methods:{errorMessages(a){const e=[];if(!this.v$.goal[a].$dirty)return e;for(const o of this.v$.goal[a].$errors)e.push(o.$message);return e},async submit(){await this.v$.$validate()&&await u.put("/api/users/"+this.user.id,this.user).then(async e=>{let o=this.$refs.image.files[0];if(this.$toast.add({severity:"success",summary:"Profile  updated.",life:3e3}),console.log(e.data),r.commit("auth/setUser",e.data),o){let i=new FormData;i.append("image",o),await u.post("/api/users/image",i,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{r.commit("auth/setUser",s.data),this.user=r.state.auth.user.data})}})}}},y={class:"card p-fluid bg-white"},w=t("h4",null,"Profile",-1),C={class:"flex justify-content-center"},F={class:"w-6 mt-5"},V={class:"field"},B=t("label",{for:"name1"},"Name",-1),U={class:"field"},k=t("label",{for:"age1"},"Image",-1),N=["src"];function I(a,e,o,i,s,d){const p=l("InputText"),h=l("FileUpload"),_=l("Button");return c(),m("div",y,[w,t("div",C,[t("div",F,[t("div",V,[B,n(p,{modelValue:s.user.name,"onUpdate:modelValue":e[0]||(e[0]=f=>s.user.name=f),type:"text"},null,8,["modelValue"])]),t("div",U,[k,n(h,{ref:"image",mode:"basic",name:"image",accept:"image/*",maxFileSize:1e6},null,512),s.user?(c(),m("img",{key:0,width:"50",class:"mt-4",src:"http://localhost:8081/images/"+s.user.profile.img_url},null,8,N)):$("",!0)]),n(_,{onClick:d.submit,label:"Submit"},null,8,["onClick"])])])])}const D=b(x,[["render",I]]);export{D as default};
