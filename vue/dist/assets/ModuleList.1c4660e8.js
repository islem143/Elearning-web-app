import{_ as C,r as u,o as s,g as M,w as f,a as i,t as v,h,c,e as w,F as b,i as x,b as a,j as k,p as $,d as I}from"./index.72b1626b.js";const V={name:"ModuleCard",inject:["role"],props:["module"]},B={class:"flex justify-content-between"},L={key:1},T=i("hr",null,null,-1);function N(e,t,o,p,n,l){const r=u("ProgressBar"),d=u("Button"),_=u("Card");return s(),M(_,{class:"my-3"},{title:f(()=>[i("div",B,[i("h4",null,v(o.module.title),1),l.role=="student"?(s(),M(r,{key:0,class:"w-3 text-center",value:o.module.completedCourses*100/o.module.totalCourses},null,8,["value"])):h("",!0),l.role=="teacher"?(s(),c("div",L,[l.role=="teacher"?(s(),M(d,{key:0,icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:t[0]||(t[0]=m=>e.$emit("edit-module",o.module))})):h("",!0),l.role=="teacher"?(s(),M(d,{key:1,icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:t[1]||(t[1]=m=>e.$emit("confirm-delete-module",o.module))})):h("",!0)])):h("",!0)])]),content:f(()=>[w(v(o.module.descprtion)+" ",1),T,(s(!0),c(b,null,x(o.module.courses,m=>(s(),c("a",{class:"block mt-2 text-lg hover:underline cursor-pointer",key:m.id},v(m.title),1))),128))]),footer:f(()=>[a(d,{onClick:t[2]||(t[2]=m=>e.$emit("go-to",o.module)),label:l.role=="student"?"Get Started":"Edit Courses"},null,8,["label"])]),_:1})}const E=C(V,[["render",N]]),S={name:"ModulesCard",components:{ModuleCard:E},props:["modules"]};function F(e,t,o,p,n,l){const r=u("module-card");return s(!0),c(b,null,x(o.modules,d=>(s(),c("div",{key:d.id},[a(r,{onConfirmDeleteModule:_=>e.$emit("confirm-delete-module",d),onEditModule:_=>e.$emit("edit-module",d),onGoTo:_=>e.$emit("go-to",d),module:d},null,8,["onConfirmDeleteModule","onEditModule","onGoTo","module"])]))),128)}const G=C(S,[["render",F]]);const O={inject:["role"],components:{ModuleCards:G},data(){return{selectedModule:null,deleteModuleDialog:!1,data:[],search:"",layout:"grid",sortKey:null,sortOrder:null,sortField:null,sortOptions:[{label:"Price High to Low",value:"!price"},{label:"Price Low to High",value:"price"}]}},created(){this.getModules()},methods:{getModules(){let e={title:this.search};k.get("/api/module",{params:e}).then(t=>{this.data=t.data,this.role=="student"&&this.data.forEach(o=>{k.get("/api/module/"+o.id+"/completedCourses").then(p=>{o.totalCourses=p.data.totalCourse,o.completedCourses=p.data.completedCourses})})})},src(e){return console.log(e),e.img_url.split("/")[2]},goTo(e){this.$router.push({name:"module-detail",params:{moduleId:e.id}})},editModule(e){this.role=="teacher"&&this.$router.push({name:"module-edit",params:{moduleId:e.id}})},async deleteModule(){await k.delete("/api/module/"+this.selectedModule.id).then(e=>{this.deleteModuleDialog=!1;let t=this.data.findIndex(o=>o.id==this.selectedModule.id);this.data.splice(t,1)})},confirmDeleteModule(e){this.deleteModuleDialog=!0,this.selectedModule=e},onSortChange(e){const t=e.value.value,o=e.value;t.indexOf("!")===0?(this.sortOrder=-1,this.sortField=t.substring(1,t.length),this.sortKey=o):(this.sortOrder=1,this.sortField=t,this.sortKey=o)}}},y=e=>($("data-v-2e68af18"),e=e(),I(),e),j={class:"col-12"},P={class:"card"},K=y(()=>i("h3",null,"Modules",-1)),H={class:"flex align-items-center"},U={class:"p-input-icon-right col-4"},z=y(()=>i("i",{class:"pi pi-search"},null,-1)),A={key:0,class:"mt-4 text-2xl"},Y=y(()=>i("div",{class:"confirmation-content"},[i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),i("span",null,"Are you sure you want to delete the selected module?")],-1));function q(e,t,o,p,n,l){const r=u("Button"),d=u("router-link"),_=u("InputText"),m=u("module-cards"),D=u("Dialog");return s(),c("div",j,[i("div",P,[K,i("div",H,[l.role=="teacher"?(s(),M(d,{key:0,to:{name:"module-create"}},{default:f(()=>[a(r,{label:"New Module",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:e.openNew},null,8,["onClick"])]),_:1})):h("",!0),i("div",U,[z,a(_,{type:"text",class:"w-full",modelValue:n.search,"onUpdate:modelValue":t[0]||(t[0]=g=>n.search=g),placeholder:"Search",onInput:l.getModules},null,8,["modelValue","onInput"])])]),n.data.length==0&&n.search?(s(),c("p",A,'No match found for "'+v(n.search)+'".',1)):h("",!0),a(m,{onEditModule:l.editModule,onConfirmDeleteModule:l.confirmDeleteModule,onGoTo:l.goTo,modules:n.data},null,8,["onEditModule","onConfirmDeleteModule","onGoTo","modules"]),a(D,{visible:n.deleteModuleDialog,"onUpdate:visible":t[2]||(t[2]=g=>n.deleteModuleDialog=g),style:{width:"450px"},header:"Confirm",modal:!0},{footer:f(()=>[a(r,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[1]||(t[1]=g=>n.deleteModuleDialog=!1)}),a(r,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:l.deleteModule},null,8,["onClick"])]),default:f(()=>[Y]),_:1},8,["visible"])])])}const J=C(O,[["render",q],["__scopeId","data-v-2e68af18"]]),Q={name:"ModuleList",components:{ModuleListVue:J}},R={class:"grid w-8 m-auto"};function W(e,t,o,p,n,l){const r=u("ModuleListVue");return s(),c("div",R,[a(r)])}const Z=C(Q,[["render",W]]);export{Z as default};
